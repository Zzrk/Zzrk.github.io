# 响应式布局

[视口和像素的基本知识](https://www.cnblogs.com/llcdxh/p/9532385.html)

响应式布局指的是同一页面在不同屏幕尺寸下有不同的布局。传统的开发方式是PC端开发一套，手机端再开发一套，而使用响应式布局只要开发一套就够，缺点就是CSS比较重。

响应式设计与自适应设计的区别：响应式开发一套界面，通过检测视口分辨率，针对不同客户端在客户端做代码处理，来展现不同的布局和内容；自适应需要开发多套界面，通过检测视口分辨率，来判断当前访问的设备是pc端、平板、手机，从而请求服务层，返回不同的页面。


## 实现方案

1. 媒体查询

    - 屏幕大小分割点 <br>
      600px,900px,1200px,1800px <br>
      480px,800px,1400px,1400px <br>
      ...

    - Pc优先or移动优先 <br>
      不管是移动优先还是PC优先，都是依据当随着屏幕宽度增大或减小的时候，后面的样式会覆盖前面的样式。因此，移动端优先首先使用的是min-width，PC端优先使用的max-width。

2. 百分比布局

    子元素的height或width中使用百分比，是相对于子元素的直接父元素，width相对于父元素的width，height相对于父元素的height；子元素的top和bottom如果设置百分比，则相对于直接非static定位(默认定位)的父元素的高度，同样子元素的left和right如果设置百分比，则相对于直接非static定位(默认定位的)父元素的宽度；子元素的padding如果设置百分比，不论是垂直方向或者是水平方向，都相对于直接父亲元素的width，而与父元素的height无关。跟padding一样，margin也是如此，子元素的margin如果设置成百分比，不论是垂直方向还是水平方向，都相对于直接父元素的width；border-radius不一样，如果设置border-radius为百分比，则是相对于自身的宽度，除了border-radius外，还有比如translate、background-size等都是相对于自身的。

    如果全部使用百分比单位来实现响应式的布局，有明显的以下两个缺点：
    - 计算困难，如果我们要定义一个元素的宽度和高度，按照设计稿，必须换算成百分比单位。
    - 可以看出，各个属性中如果使用百分比，相对父元素的属性并不是唯一的。比如width和height相对于父元素的width和height，而margin、padding不管垂直还是水平方向都相对比父元素的宽度、border-radius则是相对于元素自身等等，造成我们使用百分比单位容易使布局问题变得复杂。

3. rem布局

    rem响应式的布局思想：
    - 一般不要给元素设置具体的宽度，但是对于一些小图标可以设定具体宽度值
    - 高度值可以设置固定值，设计稿有多大，我们就严格有多大
    - 所有设置的固定值都用rem做单位（首先在HTML总设置一个基准值：px和rem的对应比例，然后在效果图上获取px值，布局的时候转化为rem值)
    - js获取真实屏幕的宽度，让其除以设计稿的宽度，算出比例，把之前的基准值按照比例进行重新的设定，这样项目就可以在移动端自适应了

    rem布局的缺点：
    - 在响应式布局中，必须通过js来动态控制根元素font-size的大小，也就是说css样式和js代码有一定的耦合性，且必须将改变font-size的代码放在css样式之前

4. 视口单位
    - vw	相对于视窗的宽度，1vw 等于视口宽度的1%，即视窗宽度是100vw
    - vh	相对于视窗的高度，1vh 等于视口高度的1%，即视窗高度是100vh
    - vmin	vw和vh中的较小值
    - vmax	vw和vh中的较大值
    - 仅使用vw作为css单位 https://juejin.cn/post/6844903814332432397#heading-8
    - 搭配vw和rem https://juejin.cn/post/6844903814332432397#heading-9

5. [图片响应式](https://juejin.cn/post/6844903814332432397#heading-10)

    这里的图片响应式包括两个方面，一个就是大小自适应，这样能够保证图片在不同的屏幕分辨率下出现压缩、拉伸的情况；一个就是根据不同的屏幕分辨率和设备像素比来尽可能选择高分辨率的图片，也就是当在小屏幕上不需要高清图或大图，这样我们用小图代替，就可以减少网络带宽了。
  
    - 使用max-width（图片自适应）
    - 使用srcset
    - 使用background-image
    - 使用picture标签


## 总结

响应式布局的实现可以通过媒体查询+px,媒体查询+百分比，媒体查询+rem+js,vm/vh,vm/vh +rem这几种方式来实现。但每一种方式都是有缺点的，媒体查询需要选取主流设备宽度尺寸作为断点针对性写额外的样式进行适配，但这样做会比较麻烦，只能在选取的几个主流设备尺寸下呈现完美适配，另外用户体验也不友好，布局在响应断点范围内的分辨率下维持不变，而在响应断点切换的瞬间，布局带来断层式的切换变化，如同卡带的唱机般“咔咔咔”地一下又一下。通过百分比来适配首先是计算麻烦，第二各个属性中如果使用百分比，其相对的元素的属性并不是唯一的，这样就造成我们使用百分比单位容易使布局问题变得复杂。通过采用rem单位的动态计算的弹性布局，则是需要在头部内嵌一段脚本来进行监听分辨率的变化来动态改变根元素字体大小，使得CSS与JS 耦合了在一起。通过利用纯css视口单位实现适配的页面，是既能解决响应式断层问题，又能解决脚本依赖的问题的，但是兼容性还没有完全能结构接受。


**响应式布局的成型方案**

  现在的css，UI框架等都已经考虑到了适配不同屏幕分辨率的问题，实际项目中我们可以直接使用这些新特性和框架来实现响应式布局。可以有以下选择方案：

  - 利用上面的方法自己来实现，比如CSS3 Media Query,rem，vw等
  - Flex弹性布局，兼容性较差
  - Grid网格布局，兼容性较差
  - Columns栅格系统，往往需要依赖某个UI库，如Bootstrap


**响应式布局的要点**

  在实际项目中，我们可能需要综合上面的方案，比如用rem来做字体的适配，用srcset来做图片的响应式，宽度可以用rem，flex，栅格系统等来实现响应式，然后可能还需要利用媒体查询来作为响应式布局的基础，因此综合上面的实现方案，项目中实现响应式布局需要注意下面几点：
  
  - 设置viewport
  - 媒体查询
  - 字体的适配（字体单位）
  - 百分比布局
  - 图片的适配（图片的响应式）
  - 结合flex，grid，BFC，栅格系统等已经成型的方案